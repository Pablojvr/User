<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Authors filtro</title>
        <!-- Este estilo corresponde a boostrap. Puede copiar y pegar del sitio oficial de
       bootstrap-->
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-
              BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />

        <style>
            .table {
                border-radius: 5px;
                width: 50%;
                margin: 0px auto;
                float: none;
            }
        </style>
    </h:head>
    <h:body>

        <h:form id="datatableauthors">

            <center>
                <label for="datatableauthors:genre">Filtrar por genero:  </label>
                <div styleClass="form-group col-md-4">
                    <h:selectOneMenu                                       value="#{authorBean.author.literaryGenre}" styleClass="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref" >
                        <f:selectItems value="#{authorBean.literaryGenreModel.literaryGenre}"
                                       var="l" itemLabel="#{l.name}" itemValue="#{l.id}"/>
                        <f:selectItem itemLabel="Todos" itemValue=""/>
                        <f:ajax event="change"
                                execute = "inlineFormCustomSelectPref"
                                listener="@form"
                                render="@form" />
                    </h:selectOneMenu>
                </div>
            </center>

            <h:dataTable id="authorsTable" value="#{authorBean.authorModel.filterAuthors(authorBean.author.literaryGenre)}"
                         var="c"
                         styleClass="table table-striped"
                         >
                <h:column>
                    <f:facet name="header">
                        Author ID
                    </f:facet>
                    #{c.authorId}
                </h:column>
                <h:column>
                    <f:facet name="header">
                        Author Name
                    </f:facet>
                    #{c.authorName}
                </h:column>

                <h:column>
                    <f:facet name="header">
                        Phone Number
                    </f:facet>
                    #{c.authorNumber}
                </h:column>


                <h:column>
                    <f:facet name="header">
                        Date Birth
                    </f:facet>
                    <h:outputText value="#{c.authorBirth}">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                </h:column>

                <h:column>
                    <f:facet name="header">
                        Literary Genre
                    </f:facet>
                    #{c.literaryGenre}
                </h:column>
                <h:column>
                    <f:facet name="header">
                        Operations
                    </f:facet>

                    <h:commandButton action="#{authorBean.deleteAuthor(c)}"
                                     onclick="if (!confirm('Do you want to delete this author?'))
                                                 return false"
                                     value="Delete">
                        <f:ajax execute="@form" render="@form" />
                    </h:commandButton> 
                </h:column>

            </h:dataTable>
            Cantidad de autores: <h:outputText value="#{authorBean.authorModel.Contar(authorBean.author.literaryGenre)}"/>
        </h:form>
        <center>

            <h:outputLink value="index.xhtml" styleClass="btn btn-success" >
                Regresar
            </h:outputLink>
        </center>
    </h:body>
</html>
